# プロダクト要求定義書

## プロダクトビジョン

同じPC上で2人が別々のキーボードを使い、リアルタイムで対戦できるタイピングゲーム。
シンプルな操作で誰でも楽しめる、手軽な対戦体験を提供する。

## 目的

- CoderDojoで子どもも大人も手軽に遊べるパーティゲームとしての価値を提供する
- 対面での対戦を通じてコミュニケーションを促進する
- タイピングスキル向上に興味をもつきっかけを提供する

## ターゲットユーザー

- **主要ターゲット**: タイピングを楽しみたい全ての人
- **利用シーン**: CoderDojoで友人・家族との対戦、子どもが学場所での学習

## ユーザーの課題・ニーズ

| 課題                           | ニーズ                             |
| ------------------------------ | ---------------------------------- |
| タイピング練習が単調で続かない | ゲーム性を持たせて楽しく練習したい |
| オンライン対戦は準備が面倒     | すぐに対面で対戦を始めたい         |
| 複雑なルールは覚えられない     | シンプルなルールで直感的に遊びたい |

## 主要機能一覧（MVP）

| 機能       | 説明                             | 優先度 |
| ---------- | -------------------------------- | ------ |
| 対戦モード | 2人同時にタイピングして競う      | 必須   |
| スコア表示 | リアルタイムで両者のスコアを表示 | 必須   |
| タイマー   | 60秒のカウントダウン             | 必須   |
| 勝敗判定   | 時間終了時または全文打ちきり時にスコアで勝敗を決定 | 必須   |
| 出題表示   | 日本語文章とローマ字を表示       | 必須   |

## 将来の拡張機能

| 機能         | 説明                    |
| ------------ | ----------------------- |
| 制限時間選択 | 30秒/1分/2分から選択    |
| API連携      | 外部APIから出題文を取得 |

## 成功の定義

### MVP段階

- `npm install` → 1コマンドで起動できる
- 2人が別々のキーボードで同時にタイピングできる
- 60秒の対戦が正常に完了し、勝敗が表示される
- 日本語文章をローマ字入力で打てる

## ユーザーストーリー

### US-001: 対戦を開始する

```
プレイヤーとして、
ゲームを起動したらすぐに対戦を開始できるようにしたい。
なぜなら、準備に時間をかけずに遊びたいからだ。
```

**受け入れ条件:**

- ゲーム画面にアクセスすると対戦開始ボタンが表示される
- ボタンを押すとカウントダウン後に対戦が始まる

### US-002: タイピングで競う

```
プレイヤーとして、
表示された文章を正確に素早く入力して相手と競いたい。
なぜなら、勝敗を決めるスリルを味わいたいからだ。
```

**受け入れ条件:**

- 出題文が1文ずつ表示される
- 1文を打ち終えると次の文が表示される
- 入力するとリアルタイムで進捗が反映される
- 正しく入力した文字数がスコアとして加算される

### US-003: 勝敗を確認する

```
プレイヤーとして、
対戦終了後に勝敗とスコアを確認したい。
なぜなら、自分のパフォーマンスを知りたいからだ。
```

**受け入れ条件:**

- タイマー終了時、またはどちらかのプレイヤーが全文を打ちきった時に対戦が終了する
- 両者のスコアと勝敗が明確に表示される
- もう一度対戦するボタンが表示される

## 機能要件

### FR-001: ゲーム画面

- 上下分割レイアウトで2人分のタイピングエリアを表示
- 各エリアに出題文（日本語）とローマ字ガイドを表示
- 入力済み文字と未入力文字を視覚的に区別
- 1文ずつ表示し、打ち終わると次の文が表示される
- 各プレイヤーは独立して進行（P1とP2で表示中の文が異なることがある）
- 出題順は毎回ランダムだが、両プレイヤーで同じ順番

### FR-002: 入力処理

- 日本語文章をローマ字入力で受け付ける
- 複数のローマ字入力パターンを許容（例: 「し」→ si, shi）
- 正しい入力でスコア加算、誤入力はスコアに影響しない
- 出題文はひらがな・カタカナ・漢字のみ（記号・数字なし）

### FR-003: プレイヤー分離（Caps Lock方式）

- Caps Lock OFF → Player 1 の入力（小文字）
- Caps Lock ON → Player 2 の入力（大文字）
- 1画面で2人が同時にタイピング可能
- PC本体キーボード + 外付けキーボードでも動作

### FR-004: タイマー・スコア

- 60秒のカウントダウンタイマー
- リアルタイムでスコアを更新・表示
- 時間終了時、またはどちらかが全文を打ちきった時に勝敗を判定

## 非機能要件

### NFR-001: パフォーマンス

- キー入力から画面反映まで50ms以内
- スムーズなタイマー表示（1秒ごとに更新）

### NFR-002: 開発・運用

- `npm install` で依存関係をインストール
- 1コマンド（`npm start` 等）で起動
- TypeScript + React で実装
- TDD（テスト駆動開発）で開発

### NFR-003: 拡張性

- 出題データは外部ファイルから読み込む設計
- 将来のAPI連携を考慮した設計

### NFR-004: ブラウザ対応

- モダンブラウザ（Chrome, Firefox, Safari, Edge）で動作
